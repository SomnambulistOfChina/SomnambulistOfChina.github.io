<!DOCTYPE html>


  <html class="light page-post">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>14 web-异步 AJAX | SomnambulistOfChina</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="JavaWeb概述,">
  

  <meta name="description" content="简介 AJAX 是 Asynchronous JavaScript And XML 的简称。直译为，异步的JS和XML。 AJAX的实际意义是，不发生页面跳转、异步载入内容并改写页面内容的技术。 AJAX也可以简单的理解为通过JS向服务器发送请求。 回调函数 AJAX这门技术很早就被发明，但是直到2005年被谷歌的大量使用，才在市场中流行起来，可以说Google为AJAX的推广起到到推波助澜的作用">
<meta name="keywords" content="JavaWeb概述">
<meta property="og:type" content="article">
<meta property="og:title" content="14 web-异步 AJAX">
<meta property="og:url" content="http://yoursite.com/2017/12/16/33 web-异步 AJAX/index.html">
<meta property="og:site_name" content="SomnambulistOfChina">
<meta property="og:description" content="简介 AJAX 是 Asynchronous JavaScript And XML 的简称。直译为，异步的JS和XML。 AJAX的实际意义是，不发生页面跳转、异步载入内容并改写页面内容的技术。 AJAX也可以简单的理解为通过JS向服务器发送请求。 回调函数 AJAX这门技术很早就被发明，但是直到2005年被谷歌的大量使用，才在市场中流行起来，可以说Google为AJAX的推广起到到推波助澜的作用">
<meta property="og:locale" content="Java EE">
<meta property="og:updated_time" content="2019-06-07T11:47:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="14 web-异步 AJAX">
<meta name="twitter:description" content="简介 AJAX 是 Asynchronous JavaScript And XML 的简称。直译为，异步的JS和XML。 AJAX的实际意义是，不发生页面跳转、异步载入内容并改写页面内容的技术。 AJAX也可以简单的理解为通过JS向服务器发送请求。 回调函数 AJAX这门技术很早就被发明，但是直到2005年被谷歌的大量使用，才在市场中流行起来，可以说Google为AJAX的推广起到到推波助澜的作用">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?99d997f72fffd95d0fd1477dd657eafc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
  
</head>
</html>
<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">更多</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">更多</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
            搜索
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
            RSS
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#简介"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#同步处理-amp-异步处理："><span class="toc-text">同步处理&amp;异步处理：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#同步处理："><span class="toc-text">同步处理：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异步处理："><span class="toc-text">异步处理：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#同步处理问题；"><span class="toc-text">同步处理问题；</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#异步解决问题"><span class="toc-text">异步解决问题</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#请求对象"><span class="toc-text">请求对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#XMLHttpRequest"><span class="toc-text">XMLHttpRequest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XMLHttpRequest对象的方法："><span class="toc-text">XMLHttpRequest对象的方法：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XMLHttpRequest对象的属性："><span class="toc-text">XMLHttpRequest对象的属性：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例代码"><span class="toc-text">示例代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSON"><span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON通过6种数据类型来表示："><span class="toc-text">JSON通过6种数据类型来表示：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在JS中操作JSON"><span class="toc-text">在JS中操作JSON</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在Java中操作JSON"><span class="toc-text">在Java中操作JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#解析外部文本文件中的JSON："><span class="toc-text">解析外部文本文件中的JSON：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-JSON字符串转换为对象"><span class="toc-text">1.    JSON字符串转换为对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2．对象转换为JSON字符串"><span class="toc-text">2．对象转换为JSON字符串</span></a></li></ol></li></ol></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-33 web-异步 AJAX" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">14 web-异步 AJAX</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.12.16</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>SomnambulistOfChina</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/JavaWeb/">JavaWeb</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>AJAX 是 Asynchronous JavaScript And XML 的简称。直译为，异步的JS和XML。</li>
<li>AJAX的实际意义是，不发生页面跳转、异步载入内容并改写页面内容的技术。</li>
<li>AJAX也可以简单的理解为通过JS向服务器发送请求。</li>
<li>回调函数</li>
<li>AJAX这门技术很早就被发明，但是直到2005年被谷歌的大量使用，才在市场中流行起来，可以说Google为AJAX的推广起到到推波助澜的作用。</li>
</ul>
<h2 id="同步处理-amp-异步处理："><a href="#同步处理-amp-异步处理：" class="headerlink" title="同步处理&amp;异步处理："></a>同步处理&amp;异步处理：</h2><h3 id="同步处理："><a href="#同步处理：" class="headerlink" title="同步处理："></a>同步处理：</h3><ul>
<li>AJAX出现之前，我们访问互联网时一般都是同步请求，也就是当我们通过一个页面向服务器发送一个请求时，在服务器响应结束之前，我们的整个页面是不能操作的，也就是直观上来看他是卡主不动的。</li>
<li>这就带来了非常糟糕的用户体验。首先，同步请求时，用户只能等待服务器的响应，而不能做任何操作。其次，如果请求时间过长可能会给用户一个卡死的感觉。最后，同步请求的最大缺点就是即使整个页面中只有一小部分内容发生改变我们也要刷新整个页面。</li>
</ul>
<h3 id="异步处理："><a href="#异步处理：" class="headerlink" title="异步处理："></a>异步处理：</h3><ul>
<li>而异步处理指的是我们在浏览网页的同时，通过AJAX向服务器发送请求，发送请求的过程中我们浏览网页的行为并不会收到任何影响，甚至主观上感知不到在向服务器发送请求。当服务器正常响应请求后，响应信息会直接发送到AJAX中，AJAX可以根据服务器响应的内容做一些操作。</li>
<li>使用AJAX的异步请求基本上完美的解决了同步请求带来的问题。首先，发送请求时不会影响到用户的正常访问。其次，即使请求时间过长，用户不会有任何感知。最后，AJAX可以根据服务器的响应信息局部的修改页面，而不需要整个页面刷新。</li>
</ul>
<h4 id="同步处理问题；"><a href="#同步处理问题；" class="headerlink" title="同步处理问题；"></a>同步处理问题；</h4><ul>
<li>请求：发送二次请求时，只能等上次请求响应后，才能执行</li>
<li>效率：就算我们需要刷新局部，也必须刷新整个页面</li>
</ul>
<h4 id="异步解决问题"><a href="#异步解决问题" class="headerlink" title="异步解决问题"></a>异步解决问题</h4><ul>
<li>请求：aJax请求不会影响其他请求</li>
<li>效率：局部刷新</li>
</ul>
<h1 id="请求对象"><a href="#请求对象" class="headerlink" title="请求对象"></a>请求对象</h1><ul>
<li>向服务器发送请求，毫无疑问需要使用Http协议，也就是我们需要通过JS来向服务器发送一个请求报文。这里我们来回顾一下请求报文的格式：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请求首行</span><br><span class="line">请求头</span><br><span class="line">空行</span><br><span class="line">请求体</span><br></pre></td></tr></table></figure>
<ul>
<li>这是一个请求报文的格式，那我们如果手动的创建这么一个报文格式来发送给服务器想必是非常麻烦呢，于是浏览器为我们提供了一个XMLHttpRequest对象。</li>
</ul>
<h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><ul>
<li>XMLHttpRequest对象是AJAX中非常重要的对象，所有的AJAX操作都是基于该对象的。</li>
<li>XMLHttpRequest对象用来封装请求报文，我们向服务器发送的请求信息全部都需要封装到该对象中。</li>
<li>这里需要稍微注意一下，XMLHttpRequest对象并没有成为标准，但是现在的主流浏览器都支持该对象，而一些如IE6的老版本浏览器中的创建方式有一些区别，但是问题不大。</li>
<li>获取XMLHttpRequest对象：<ul>
<li>由于浏览器之间的差异，不同浏览器中获取XMLHttpRequest的方式不同，但总的来说一共有三种方式：</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var xhr = new XMLHttpRequest()</span><br><span class="line">	目前主流浏览器都支持</span><br><span class="line">var xhr = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)</span><br><span class="line">	IE6支持的方式</span><br><span class="line">var xhr = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)</span><br><span class="line">	IE5.5一下支持的方式</span><br></pre></td></tr></table></figure>
<ul>
<li>根据三种不同的方式编写通用方法来获取XMLHttpRequest对象：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//获取XMLHttpRequest的通用方法</span><br><span class="line">function getXMLHttpRequest()&#123;</span><br><span class="line">	var xhr;</span><br><span class="line">	try&#123;</span><br><span class="line">		//大部分浏览器都支持</span><br><span class="line">		xhr = new XMLHttpRequest();</span><br><span class="line">	&#125;catch(e)&#123;</span><br><span class="line">		try&#123;</span><br><span class="line">			//如果不支持，在这里捕获异常并且采用IE6支持的方式</span><br><span class="line">			xhr = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);</span><br><span class="line">		&#125;catch(e)&#123;</span><br><span class="line">			//如果还不支持，在这里捕获异常并采用IE5支持的方式</span><br><span class="line">			xhr = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return xhr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="XMLHttpRequest对象的方法："><a href="#XMLHttpRequest对象的方法：" class="headerlink" title="XMLHttpRequest对象的方法："></a>XMLHttpRequest对象的方法：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">open(method,url,async)</span><br><span class="line">	open()用于设置请求的基本信息，接收三个参数。</span><br><span class="line">        1.	method</span><br><span class="line">            请求的方法：get或post</span><br><span class="line">        	接收一个字符串</span><br><span class="line">        2.	url</span><br><span class="line">        	请求的地址，接收一个字符串</span><br><span class="line">        3.	Assync</span><br><span class="line">        	发送的请求是否为异步请求，接收一个布尔值。</span><br><span class="line">        	true 是异步请求</span><br><span class="line">        	false 不是异步请求（同步请求）</span><br><span class="line">send(string)</span><br><span class="line">	send()用于将请求发送给服务器，可以接收一个参数</span><br><span class="line">        1.	string参数</span><br><span class="line">        	该参数只在发送post请求时需要。</span><br><span class="line">        	string参数用于设置请求体</span><br><span class="line">setRequestHeader(header,value)</span><br><span class="line">	用于设置请求头</span><br><span class="line">        1.	header参数</span><br><span class="line">        	字符串类型，要设置的请求头的名字</span><br><span class="line">        2.	value参数</span><br><span class="line">        	字符串类型，要设置的请求头的值</span><br></pre></td></tr></table></figure>
<h2 id="XMLHttpRequest对象的属性："><a href="#XMLHttpRequest对象的属性：" class="headerlink" title="XMLHttpRequest对象的属性："></a>XMLHttpRequest对象的属性：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">readyState</span><br><span class="line">	描述XMLHttpRequest的状态</span><br><span class="line">	一共有五种状态分别对应了五个数字：</span><br><span class="line">    	0 ：请求尚未初始化，open()尚未被调用</span><br><span class="line">    	1 ：服务器连接已建立，send()尚未被调用</span><br><span class="line">    	2 ：请求已接收，服务器尚未响应</span><br><span class="line">    	3 ：请求已处理，正在接收服务器发送的响应</span><br><span class="line">    	4 ：请求已处理完毕，且响应已就绪。</span><br><span class="line">status</span><br><span class="line">	请求的响应码</span><br><span class="line">    	200 响应成功</span><br><span class="line">    	404 页面为找到</span><br><span class="line">    	500 服务器内部错误 </span><br><span class="line"></span><br><span class="line">… … … …</span><br><span class="line">onreadystatechange</span><br><span class="line">	该属性需要指向一个函数</span><br><span class="line">	该函数会在readyState属性发生改变时被调用</span><br><span class="line">responseText</span><br><span class="line">	获得字符串形式的响应数据。</span><br><span class="line">responseXML（用的比较少）</span><br><span class="line">	获得 XML 形式的响应数据。</span><br></pre></td></tr></table></figure>
<h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><ul>
<li>使用AJAX发送GET请求</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//获取xhr对象</span><br><span class="line">var xhr = getXMLHttpRequest();</span><br><span class="line">//设置请求信息</span><br><span class="line">xhr.open(&quot;get&quot;,&quot;AjaxServlet?&amp;t=&quot;+Math.random(),true);</span><br><span class="line">//发送请求</span><br><span class="line">xhr.send();</span><br><span class="line">//监听请求状态</span><br><span class="line">xhr.onreadystatechange = function()&#123;</span><br><span class="line">//当响应完成</span><br><span class="line">	if(xhr.readyState == 4)&#123;</span><br><span class="line">		//且状态码为200时</span><br><span class="line">		if(xhr.status == 200)&#123;</span><br><span class="line">			//接收响应信息（文本形式）</span><br><span class="line">			var text = xhr.responseText;</span><br><span class="line">			//弹出消息</span><br><span class="line">	      alert(text);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这是一个最简单的AJAX代码，向AjaxServlet发送了一个get请求，并且在页面中输出响应的内容</p>
<ul>
<li>使用AJAX发送POST请求</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//获取xhr对象</span><br><span class="line">var xhr = getXMLHttpRequest();</span><br><span class="line">//设置请求信息</span><br><span class="line">xhr.open(&quot;post&quot;,&quot;2.jsp&quot;,true);</span><br><span class="line">//设置请求头</span><br><span class="line">xhr.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">//发送请求</span><br><span class="line">xhr.send(&quot;hello=123456&quot;);</span><br><span class="line">//监听请求状态</span><br><span class="line">xhr.onreadystatechange = function()&#123;</span><br><span class="line">//当响应完成</span><br><span class="line">if(xhr.readyState == 4)&#123;</span><br><span class="line">	//且状态码为200时</span><br><span class="line">	if(xhr.status == 200)&#123;</span><br><span class="line">		//接收响应信息（文本形式）</span><br><span class="line">		var text = xhr.responseText;</span><br><span class="line">		//弹出消息</span><br><span class="line">		alert(text);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><ul>
<li>上边两个示例返回都是一个字符串，那当我们需要返回一个复杂的数据时，比如说需要返回一个对象时，就需要定义一下数据的格式。</li>
<li>AJAX一开始使用的时XML的数据格式，XML的数据格式非常简单清晰，容易编写，但是由于XML中包含了过多的标签，以及十分复杂的结构，解析起来也相对复杂，所以目前来讲，AJAX中已经几乎不使用XML来发送数据了。取而代之的是一项新的技术JSON。</li>
<li>JSON是JavaScript Object Notation 的缩写，是JS提供的一种数据交换格式。</li>
<li>JSON对象本质上就是一个JS对象，但是这个对象比较特殊，它可以直接转换为字符串，在不同语言中进行传递，通过工具又可以转换为其他语言中的对象。</li>
<li>例，有如下一个JSON对象：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;“name”:”sunwukong” , ”age”:18 , ”address”:”beijing” &#125;</span><br><span class="line">	这个对象中有三个属性name、age和address</span><br><span class="line">	如果将该对象使用单引号引起了，那么他就变成了一个字符串</span><br><span class="line">‘&#123;“name”:”sunwukong” , ”age”:18 , ”address”:”beijing” &#125;’</span><br><span class="line">	变成字符串后有一个好处，就是可以在不同语言之间传递。</span><br><span class="line">	比如，将JSON作为一个字符串发送给Servlet，在Java中就可以把JSON字符串转换为一个Java对象。</span><br></pre></td></tr></table></figure>
<h2 id="JSON通过6种数据类型来表示："><a href="#JSON通过6种数据类型来表示：" class="headerlink" title="JSON通过6种数据类型来表示："></a>JSON通过6种数据类型来表示：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">字符串</span><br><span class="line">	例子：”字符串”</span><br><span class="line">	注意：不能使用单引号</span><br><span class="line">数字：</span><br><span class="line">	例子：123.4</span><br><span class="line">布尔值：</span><br><span class="line">	例子：true、false</span><br><span class="line">null值:</span><br><span class="line">	例子：null</span><br><span class="line">对象</span><br><span class="line">	例子：&#123;“name”:”sunwukong”, ”age”:18&#125;</span><br><span class="line">数组</span><br><span class="line">	例子：[1,”str”,true]</span><br></pre></td></tr></table></figure>
<h2 id="在JS中操作JSON"><a href="#在JS中操作JSON" class="headerlink" title="在JS中操作JSON"></a>在JS中操作JSON</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">创建JSON对象</span><br><span class="line">var json = &#123;“name1”:”value1”,”name2”:”value2” , “name3”:[1,”str”,true]&#125;;</span><br><span class="line">var json = [&#123;“name1”:”value1”&#125;,&#123;“name2”:”value2”&#125;];</span><br><span class="line">	JSON对象转换为JSON字符串</span><br><span class="line">	JSON.stringify(JSON对象)</span><br><span class="line">	JSON字符串转换为JSON对象</span><br><span class="line">	JSON.parse(JSON字符串)</span><br></pre></td></tr></table></figure>
<h2 id="在Java中操作JSON"><a href="#在Java中操作JSON" class="headerlink" title="在Java中操作JSON"></a>在Java中操作JSON</h2><ul>
<li>在Java中可以从文件中读取JSON字符串，也可以是客户端发送的JSON字符串，所以第一个问题，我们先来看如何将一个JSON字符串转换成一个Java对象。</li>
<li>首先解析JSON字符串我们需要导入第三方的工具，目前主流的解析JSON的工具大概有三种json-lib、jackson、gson。三种解析工具相比较json-lib的使用复杂，且效率较差。而Jackson和gson解析效率较高。使用简单，这里我们以gson为例讲解。</li>
<li>Gson是Google公司出品的解析JSON工具，使用简单，解析性能好。</li>
<li>Gson中解析JSON的核心是Gson的类，解析操作都是通过该类实例进行。</li>
<li>废话不多说直接上代码。</li>
</ul>
<h3 id="解析外部文本文件中的JSON："><a href="#解析外部文本文件中的JSON：" class="headerlink" title="解析外部文本文件中的JSON："></a>解析外部文本文件中的JSON：</h3><h4 id="1-JSON字符串转换为对象"><a href="#1-JSON字符串转换为对象" class="headerlink" title="1.    JSON字符串转换为对象"></a>1.    JSON字符串转换为对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String json = &quot;&#123;\&quot;name\&quot;:\&quot;张三\&quot;,\&quot;age\&quot;:18&#125;&quot;;</span><br><span class="line">Gson gson = new Gson();</span><br><span class="line">//转换为集合</span><br><span class="line">Map&lt;String,Object&gt; stuMap = gson.fromJson(json, Map.class);</span><br><span class="line">//如果编写了相应的类也可以转换为指定对象</span><br><span class="line">Student fromJson = gson.fromJson(json, Student.class);</span><br></pre></td></tr></table></figure>
<h4 id="2．对象转换为JSON字符串"><a href="#2．对象转换为JSON字符串" class="headerlink" title="2．对象转换为JSON字符串"></a>2．对象转换为JSON字符串</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Student stu = new Student(&quot;李四&quot;, 23);</span><br><span class="line">Gson gson = new Gson();</span><br><span class="line">//&#123;&quot;name&quot;:&quot;李四&quot;,&quot;age&quot;:23&#125;</span><br><span class="line">String json = gson.toJson(stu);</span><br><span class="line">		</span><br><span class="line">Map&lt;String , Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">map.put(&quot;name&quot;, &quot;孙悟空&quot;);</span><br><span class="line">map.put(&quot;age&quot;, 30);</span><br><span class="line">//&#123;&quot;age&quot;:30,&quot;name&quot;:&quot;孙悟空&quot;&#125;</span><br><span class="line">String json2 = gson.toJson(map);</span><br><span class="line">		</span><br><span class="line">List&lt;Student&gt; list = new ArrayList&lt;Student&gt;();</span><br><span class="line">list.add(new Student(&quot;八戒&quot;, 18));</span><br><span class="line">list.add(new Student(&quot;沙僧&quot;, 28));</span><br><span class="line">list.add(new Student(&quot;唐僧&quot;, 38));</span><br><span class="line">//[&#123;&quot;name&quot;:&quot;八戒&quot;,&quot;age&quot;:18&#125;,&#123;&quot;name&quot;:&quot;沙僧&quot;,&quot;age&quot;:28&#125;,&#123;&quot;name&quot;:&quot;唐僧&quot;,&quot;age&quot;:38&#125;]</span><br><span class="line">String json3 = gson.toJson(list);</span><br></pre></td></tr></table></figure>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持forsigner</div>
        <ul>
        
          <li class="item">
            
              <span>微信扫一扫</span>
            
            <img src="/images/qr-wechat.jpeg" alt>
          </li>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="/images/qr-alipay.jpeg" alt>
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/12/01/32 web-Listener(监听器)/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/12/26/34 web-文件的上传和下载/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
              搜索
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
              RSS
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
    <div id="comment" class="vcomment"></div>
    <script>
        var notify = 'false' == true ? true : false;
        var verify = 'false' == true ? true : false;
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
            return GUEST_INFO.indexOf(item) > -1
        });
        guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
        window.valine = new Valine({
            el: '.vcomment',
            notify: notify,
            verify: verify,
            appId: "b8cfVAxSX9whYsIOMmxwCicp-gzGzoHsz",
            appKey: "klYDKAeEh6GPa0wnf22lQd96",
            avatar:'identicon',
            placeholder: "ヾﾉ≧∀≦)o 来呀！快活呀！~",
            guest_info:guest_info,
            pageSize:'10'
        });
    </script>
  
    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
